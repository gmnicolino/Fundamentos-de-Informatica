Cuando trabajamos con archivos de texto, suele pasar desapercibida la presencia de caracteres que dan formato legible al texto y que no se representan por asÃ­ decirlo â€œgraficamente explicitosâ€. Un ejemplo de ello es el espacio entre las palabras que tipeamos para constuir una oraciÃ³n. Este tipo de caracteres, comunmente conocidos como caracteres especiales, se encuentran respresentados por secuencias de escape.

Las secuencias de escape son una combinaciÃ³n de caracteres que tiene un significado distinto de los caracteres literales contenidos en ella y se utilizan para definir ciertos caracteres especiales dentro de cadenas de texto, tipicamente aquellos que dan formato al mismo. Y aÃºn cuando son un conjunto de caracteres, una secuencia de escape se considerada un carÃ¡cter Ãºnico.

Estas combinaciones constan tipicamente de una barra invertida (\) seguida de una letra o de una combinaciÃ³n de dÃ­gitos, que tendrÃ¡ un significado distinto segÃºn cuales sean. Por ejemplo, para representar un carÃ¡cter de salto de lÃ­nea se utiliza la secuencia de espace \n.

Vamos a ver algunas de las secuencias de escape mÃ¡s frecuentes:

Secuencia de escape	representaciÃ³n
\n	salto de lÃ­nea
\t	Tab o cambio de columna
\s	espacio
'	Comillas simples
"	Comillas dobles
2. Â¿QuÃ© son las expresiones regulares?

Las expresiones regulares son cadenas de caracteres basadas en reglas sintÃ¡cticas, que permiten describir secuencias de caracteres. Es decir es un criterio para buscar, capturar o reemplazar texto utilizando patrones. Estas son una herramienta poderosa a la hora de hacer bÃºsquedas sofisticadas en Strings de forma simple.

Las expresiones regulares se pueden concatenar para formar nuevas expresiones regulares; si, por ejemplo, A y B son expresiones regulares, AB tambiÃ©n es una expresiÃ³n regular.

Para pensar ğŸ¤”: Â¿QuÃ© usos crees que podemos darle a las expresiones regulares? ProponÃ© una aplicaciÃ³n concreta para tu carrera/disciplina.

3. Metacaracteres

Los metacaracteres son caracteres especiales que, dependiendo del contexto, tienen un significado especial para las expresiones regulares.

Existen lo que se conoce como metacaracteres delimitadores, que nos permitirÃ¡n delimitar dÃ³nde queremos buscar los patrones de bÃºsqueda. Entre ellos tenemos:

Metacaracter	Significado
^	Inicio de lÃ­nea
$	Fin de linea
\A	Inicio de texto
\Z	Fin de texto
.	Coincide con cualquier caracter en una lÃ­nea dada
Para pensar ğŸ¤”: Dado el siguiente texto:

texto = 'Esta es la linea uno\npalabra en la linea dos\n'
Â¿CÃ³mo crees que darÃ¡n las siguientes bÃºsquedas?

expresion regular a: '^palabra'

expresion regular b: '\Apalabra'

expresion regular c: 'palabra$'

expresion regular d: 'palabra\Z'

Ya vimos que en programaciÃ³n suele ser Ãºtil repetir la ejecuciÃ³n de porciones de cÃ³digo. Las expresiones regulares nos permiten no solo delimitar la porciÃ³n de texto donde deseamos buscar, sino que tambiÃ©n permite repitir cierta cantidad de veces una busqueda dada. Para ello se utilizan los metacaracteres cuantificadores:

Metacaracter	Significado
*	Cero o mÃ¡s: todas las ocurrencias de un dado substring
+	Una o mÃ¡s ocurrencias del patrÃ³n
?	Cero o una
{n}	Exactamente n veces
{n,m}	Por lo menos n pero no mÃ¡s de m veces.
Para pensar ğŸ¤”: Â¿QuÃ© significarÃ¡ la expresiÃ³n regular "X(.*)Y"? Ennumera algunas de las posibles strings que cumplen con dicha condiciÃ³n.

ğŸ§—â€â™€ï¸ DesafÃ­o I: Â¿ConstruÃ­ la expresiÃ³n regular que obtenga al menos 4 dÃ­gitos?

ğŸ§—â€â™€ï¸ DesafÃ­o II: Â¿ConstruÃ­ la expresiÃ³n regular que obtenga al entre 3 y 6 letras minÃºsculas?

ğŸ§—â€â™€ï¸ DesafÃ­o III: Â¿ConstruÃ­ la expresiÃ³n regular que obtenga todas las apariciones del patrÃ³n ab en un string?

Respuestas
Para pensar ğŸ¤”: Â¿Existe una Ãºnica respuesta para los ejercicios? Â¿QuÃ© otras alternativas se te ocurren?

Los dÃ­gitos entre llaves de la forma {n,m}, especifican el mÃ­nimo nÃºmero de ocurrencias en n y el mÃ¡ximo en m.

Existen tambien metacaracteres predefinidos, que nos facilitan el uso de las expresiones regulares:

Metacaracter	Significado
\w	Caracter alfanumÃ©rcio
\W	Caracter NO alfanumÃ©rcio
\d	Caracter numÃ©rcio
\D	Caracter NO numÃ©rcio
\s	Un espacio, de cualquier tipo (\t\n\r\f)
\S	Cualquier caracter que no sea un espacio
Como ya hemos visto, estos metacaracteres puden combinarse para lograr expresiones regulares complejas.

ğŸ§—â€â™€ï¸Desafio IV: Â¿QuÃ© expresiÃ³n regular usarÃ­as para extraer el nÃºmero de estudiantes que hay en una clase segÃºn el siguiente texto:

texto = 'En la clase de IntroducciÃ³n a la programaciÃ³n hay 30 estudiantes'
Respuestas
Rangos

Un rango es una clase de caracteres abreviada que se crea escribiendo el primer caracter del rango, un guiÃ³n y el Ãºltimo caracter del rango. Sirve para listar un conjunto de caracteres de interÃ©s, de este modo se encontrarÃ¡ uno cualquiera de los caracteres de la lista. Por ejemplo:

- El rango [a-d] equivale al [abcd]
- El rango [1-10] equivale al substring [12345678910]
- El rango [Dd] equivale a buscar una D mayÃºscula y una d minÃºscula
AsÃ­ como podemos listar los caracteres posibles en cierta posiciÃ³n de la cadena, tambiÃ©n podemos listar caracteres que no deben aparecer utilizando el ^. AsÃ­, por ejemplo rango [^a-d] coincide con cualquier caracter que no sea abcd.

4. Expresiones regulares en Python

Para trabajar con expresiones regulares en Python, es necesaria la librerÃ­a RE, que puede ser instalada usando el instalador de Python (PIP):

pip install re
De todos modos, antes de instalar una librerÃ­a siempre es importante comprobar si esta estÃ¡ o no instalada. Para ello, desde una terminal de Python debemos escribir:

import re
Si la librerÃ­a estÃ¡ instalada no nos aparecerÃ¡ ningÃºn error.

5. Coincidencias o Matches

Comenzaremos por aprender sobre las expresiones regulares mÃ¡s simples posibles. Dado que las expresiones regulares se utilizan para operar en strings, vamos a empezas con la tarea mÃ¡s comÃºn: los caracteres coincidentes.

Si un String se corresponde con el criterio que define una expresiÃ³n regular, se dice que el String hace match con la expresiÃ³n, y equivalentemente, se dice que la expresiÃ³n acepta al String.

Podemos encontrar patrones en un texto con el funciÃ³n search:

>>> import re
>>> texto = "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Amet et amet."
>>> patron = "amet"
>>> re.search(patron, texto)
Para pensar ğŸ¤”: Â¿QuÃ© resultado obtenemos al ejecutar en la Ãºltima linea?

ğŸ§—â€â™€ï¸Desafio V: imprimÃ­ el fragmento del texto entre la posiciÃ³n 22 y 26 Â¿QuÃ© resultado obtenÃ©s? Â¿QuÃ© quiere decir el mensaje span?

Ahora veamos quÃ© hace match():

>>> import re
>>> texto = "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Amet et amet."
>>> patron = "amet"
>>> re.match(patron, texto)
Para pensar ğŸ¤”: Â¿QuÃ© resultado obtenemos con search()?Â¿QuÃ© diferencias observan con match()?

Detalles
Vamos a ejecutar la Ãºltima linea con una modificaciÃ³n:

>>> import re
>>> texto = "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Amet et amet."
>>> patron = "amet"
>>> re.search(patron, texto).group()
Para pensar ğŸ¤”: Â¿QuÃ© resultado obtenemos? Â¿Para quÃ© sirve la funciÃ³n group()?

Utilicemos ahora otro mÃ©todo que nos permita obtener todas las ocurrencias del substring â€œametâ€

>>> re.findall(patron, texto)
Para pensar ğŸ¤”: Â¿QuÃ© resultado obtenemos?

ğŸ§—â€â™€ï¸Desafio VI: ExpresÃ¡ el patron de bÃºsqueda utilizando lo visto anteriormente sobre metacaracteres y rangos.

Como vimos hasta acÃ¡ el mÃ©todo group() sirve para mostrar el resultado de una bÃºsqueda, pero veamos:

>>> import re
>>> texto = "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Amet et amet."
>>> patron = "amet"
>>> re.search(patron, texto).group()
'amet'
>>> re.search(patron, texto).group(0)
'amet'
El mÃ©todo group() (o group(0)) nos devuelve la coincidencia. Sin embargo si lo que se quiere no es encontrar un patrÃ³n en particular, sino obtener lo que estÃ¡ dentro de cierto patrÃ³n (por ejemplo lo que hay entre ciertas palabras) hay que modificar el patrÃ³n. Vamos a ver el siguiente ejemplo:

>>> import re
>>> texto = "Lorem ipsum dolor sit amet, consectetur ipsum elit. Amet sit amet."
>>> patron = "ipsum(.*)sit"
>>> re.search(patron, texto).group()
'ipsum dolor sit amet, consectetur ipsum elit. Amet sit'
>>> re.search(patron, texto).group(0)
'ipsum dolor sit amet, consectetur ipsum elit. Amet sit'
>>> re.search(patron, texto).group(1)
' dolor sit amet, consectetur ipsum elit. Amet '
AcÃ¡ se utilizaron algunos metacaracteres, como lo son el punto (.) para indicar que puede ser cualquier carÃ¡cter, y el asterÃ­sco (*) para indicar que puede haber 0 o mÃ¡s de estos caracteres. De esta manera obtenemos como resultado lo que se encuentre entre las palabras â€œipsumâ€ y â€œsitâ€, sin embargo observen dos cosas. Primero, el string que nos devuelve tiene dentro un substring que deberÃ­a haber sido encontrado en la bÃºsqueda: â€œipsum dolor sitâ€, pero que sin embargo no aparece. Segundo, nuevamente al hacer group() o group(0) obtenemos la coincidencia, pero si nos queremos quedar con el substring que estÃ¡ contenido entre estas palabras debemos utilizar group(1). Ahora bien, como vimos, usar el patrÃ³n de bÃºsqueda de esta manera prioriza los matches externos, es decir, busca el primer delimitador (â€œipsumâ€ en nuestro caso) y luego abarca todo hasta la Ãºltima apariciÃ³n del segundo delimitador (â€œsitâ€). Existe una forma de priorizar los matches internos y es con el metacarÃ¡cter ?:

>>> import re
>>> texto = "Lorem ipsum dolor sit amet, consectetur ipsum elit. Amet sit amet."
>>> patron = "ipsum(.*?)sit"
>>> re.search(patron, texto).group()
'ipsum dolor sit'
>>> re.search(patron, texto).group(0)
'ipsum dolor sit'
>>> re.search(patron, texto).group(1)
' dolor  '
Cuando se quieren obtener todas las apariciones del patrÃ³n se utiliza el mÃ©todo findall el cual actÃºa para cada coincidencia como si devolviera el group(1), es decir devuelve en una lista la parte que se encuentra dentro de los delimitadores.

>>> import re
>>> texto = "Lorem ipsum dolor sit amet, consectetur ipsum elit. Amet sit amet."
>>> patron = "ipsum(.*?)sit"
>>> re.findall(patron, texto)
[' dolor ', ' elit. Amet ']
6. Reemplazos o sustituciones masivas

Ejecutemos ahora la siguiente lÃ­nea:

>>> re.sub(patron, "###", texto)
Para pensar ğŸ¤”: Â¿QuÃ© resultado obtenemos? Â¿Para quÃ© sirve la funciÃ³n sub?

La funciÃ³n sub permite reemplazar todos las ocurrencias del patrÃ³n por otro patrÃ³n en un String.